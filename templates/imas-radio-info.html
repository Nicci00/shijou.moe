<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='3rdparty/Skeleton/css/skeleton.css', _external = True)}}">
	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='3rdparty/Skeleton/css/normalize.css', _external = True)}}">
	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='3rdparty/css/font-awesome.min.css', _external = True)}}">

	<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway:400,300,600">

	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/info.css', _external = True)}}">
	<script type="text/javascript">

	var socket_url = String("{{ws_url}}")

	function timestamp(){
		return "[" + String(Math.floor(Date.now() / 1000)) + "] ";
	}

	var ws = new WebSocket(socket_url);

	ws.onopen = function(){
		console.log(timestamp() + "Connected alright")
	}

	ws.onmessage = function(event) {

		console.log(timestamp() + "Got data from server alright");

		var data = JSON.parse(event.data)
		document.getElementById("art").innerHTML = data.artist;
		document.getElementById("tit").innerHTML = data.title;
		document.getElementById("lis").innerHTML = data.listeners;
	};
	</script>
</head>
<body>

<p>Artist(s): <span id="art"></span></p>
<p>Title: <span id="tit"></span></p>
<p>Current Listeners: <span id="lis"></span></p>

<span class="small">Stuck? <a onclick="location.reload()" href="#" >Reload</a></span>

</body>
</html>
